name: Lean CI

on:
  push:
    paths: ['formal/**']
  pull_request:
    paths: ['formal/**']
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      # Use the official Lean action instead of `curl | sh` for elan install.
      # This keeps CI reproducible and avoids executing a moving install script from `master`.
      - name: Build (Lean)
        uses: leanprover/lean-action@v1.4.0
        with:
          lake-package-directory: formal
          build: true
